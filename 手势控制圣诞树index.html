<!DOCTYPE html>
<html>
<head>
    <title>æ‰‹åŠ¿æ§åˆ¶åœ£è¯æ ‘</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/hands"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils"></script>
    <style>
        body { margin: 0; overflow: hidden; background: #050b1a; color: white; text-align: center; font-family: sans-serif; }
        #video-container { position: absolute; width: 120px; height: 90px; bottom: 10px; right: 10px; border: 2px solid #0f0; }
        #input_video { width: 100%; height: 100%; transform: scaleX(-1); }
        #tree { font-size: 100px; margin-top: 20vh; transition: transform 0.1s; display: inline-block; }
        .stars { color: #ffd700; text-shadow: 0 0 10px #fff; }
    </style>
</head>
<body>

    <div id="status">æ­£åœ¨åŠ è½½æ‰‹åŠ¿æ¨¡å‹...</div>
    
    <div id="tree">
        <div class="stars">â˜…</div>
        ğŸ„
    </div>
    <p>ä¼¸å‡ºé£ŸæŒ‡ï¼Œå·¦å³ç§»åŠ¨æ¥æ—‹è½¬åœ£è¯æ ‘ï¼</p >

    <div id="video-container">
        <video id="input_video"></video>
    </div>

    <script>
        const videoElement = document.getElementById('input_video');
        const tree = document.getElementById('tree');
        const status = document.getElementById('status');

        function onResults(results) {
            if (results.multiHandLandmarks && results.multiHandLandmarks.length > 0) {
                status.innerText = "ğŸ™Œ å·²è¯†åˆ«æ‰‹åŠ¿";
                // è·å–é£ŸæŒ‡æŒ‡å°–åæ ‡ (Landmark 8)
                const indexFinger = results.multiHandLandmarks[0][8];
                // å°† 0-1 çš„åæ ‡è½¬æ¢ä¸ºæ—‹è½¬è§’åº¦
                const rotation = (indexFinger.x - 0.5) * 180;
                tree.style.transform = `rotateY(${rotation}deg) scale(${1 + (0.5 - indexFinger.y)})`;
            } else {
                status.innerText = "è¯·å°†æ‰‹å±•ç¤ºåœ¨æ‘„åƒå¤´å‰";
            }
        }

        const hands = new Hands({
            locateFile: (file) => `https://cdn.jsdelivr.net/npm/@mediapipe/hands/${file}`
        });

        hands.setOptions({
            maxNumHands: 1,
            modelComplexity: 1,
            minDetectionConfidence: 0.5,
            minTrackingConfidence: 0.5
        });

        hands.onResults(onResults);

        const camera = new Camera(videoElement, {
            onFrame: async () => {
                await hands.send({image: videoElement});
            },
            width: 480,
            height: 360
        });
        camera.start();
    </script>
</body>
</html>